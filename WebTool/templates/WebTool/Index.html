<!DOCTYPE html>
<html lang="en">
{% load staticfiles %}

<head>

    <script src="https://unpkg.com/vue"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.5"></script>
    <script  src="http://code.jquery.com/jquery-latest.min.js"></script>

    <script type="text/javascript" src="{% static 'js/csrf_token_setup.js' %}"></script >
    <link rel="stylesheet" href="{% static 'css/modaldialog.css' %}" type="text/css">
    <meta charset="UTF-8">
    <style>

    </style>

</head>
<body>
<script type="text/x-template" id="modal-template">
  <transition name="modal">
    <div class="modal-mask">
      <div class="modal-wrapper">
        <div class="modal-container">

          <div class="modal-header">
            <slot name="header">
              default header
            </slot>
          </div>

          <div class="modal-body">
            <slot name="body">
              default body
            </slot>
          </div>

          <div class="modal-footer">
            <slot name="footer">
              default footer
              <button class="modal-default-button" @click="$emit('close')">
                OK
              </button>
            </slot>
          </div>
        </div>
      </div>
    </div>
  </transition>
</script>

    <div id="Login">
        <title>[[title]]</title>
        <p></p>
        <label>Select Server : </label>
        <select v-model="selectedserver">
               <option v-for="sv in servers" v-bind:value="sv" >
                [[ sv ]]
              </option>
        </select></br>

        <label>Login ID : </label><input v-model="userid" ></br>
        <label>Password : </label><input v-model="pass" type="password" >

        <button v-on:click="onlogin" >접속</button>
        <button id="show-modal" @click="showModal = true">Show Modal</button>
    <span>Selected: [[ selectedserver ]]</span>
        <modal v-if="showModal" @close="showModal = false">
            <!--
              you can use custom content here to overwrite
              default content
              <h3 slot="header">custom header</h3>
            -->

        </modal>
    </div>
</body>
</html>
<script>
    Vue.component('modal', {
      template: '#modal-template'
    });
   var  strServers = "{{ server_list }}";
    strServers = strServers.replace(/&quot;/gi,"\"");
    strServers = strServers.replace(/&quot;/gi,"\"");

    var cVeuVm = new Vue({
            delimiters: ['[[', ']]'],
            el: '#Login',
            data: {
                title: "Login View",
                userid :'kyd',
                pass:'1234',
                showModal: false
                ,servers: []
                ,selectedserver:''
            },
            http: {
                root: 'http://localhost:8000',
                headers: {
                  Authorization: '<TOKEN_HERE>'
                }
            },
            methods: {
                onlogin: function (e) {
                $.post('/Index',{ id: this.userid , userpass:this.pass,Select_Server:this.selectedserver },function(data,status){
                    if ( "true" == data.Result )
                        alert(data.Result);
                        window.location.href = '/LoginMain';
                });

                },
                onnewaccount: function (e) {
                  console.log(e.target.tagName) // "A"
                  console.log(e.targetVM === this) // true
                }
              },
              mounted : function()
              {
                    this.servers = JSON.parse(strServers);
                    this.selectedserver = this.servers[0];
              }
    });

</script>
